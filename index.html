<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Success</title>
    <script>
        // Function to get URL parameters
        function getQueryParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                reference: params.get('reference'),
                status: params.get('status')
            };
        }

       document.addEventListener("DOMContentLoaded", () => {
    // Get the raw query string
    const rawQuery = window.location.search;

    // Fix and parse the query string manually
    const cleanedQuery = rawQuery.replace(/\?/g, '&').substring(1); // Replace all '?' with '&' except the first
    const params = new URLSearchParams(cleanedQuery);

    // Extract parameters
    const reference = params.get('reference');
    const status = params.get('status');

    // Display the transaction status and reference
    if (status === "success" && reference) {
        document.getElementById("transaction-reference").textContent = `Transaction Reference: ${reference}`;
    } else {
        document.getElementById("transaction-reference").textContent = "Transaction failed or reference not found.";
    }

    // Log for debugging
    console.log("Cleaned Query:", cleanedQuery);
    console.log("Reference:", reference);
    console.log("Status:", status);
});
    </script>
</head>
<body>
    <h1>Payment Status</h1>
    <p>Your transaction reference is: <strong id="transaction-reference">Loading...</strong></p>
</body>
</html>
